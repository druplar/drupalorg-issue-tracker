"use strict";var DrupalIssuesApp=angular.module("DrupalIssuesApp",[]).constant("chromeStorage",chrome.storage.local).constant("nodeEndpoint","https://www.drupal.org/api-d7/node/");DrupalIssuesApp.controller("DrupalIssuesController",["$scope","$http","chromeStorage","nodeEndpoint","nodeService",function(a,b,c,d,e){a.issues={},a.issueOrderBy="nid",a.ajaxInProcess=!1,a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},c.get("issueNodes",function(b){a.$apply(function(){a.loadIssues(b)})}),a.loadIssues=function(b){b&&b.issueNodes&&(a.issues=b.issueNodes)},a.saveIssues=function(){c.set({issueNodes:a.issues})},a.addIssue=function(b){a.refreshIssue(b.nid),b.nid=null},a.removeIssue=function(b){delete a.issues[b],a.alerts.push({type:"success",message:"Removed #"+b}),a.saveIssues()},a.refreshIssue=function(b){a.ajaxInProcess=!0,e.getNode(b).success(function(b){console.log(b),e.getNode(b.field_project.id).success(function(c){console.log(c),a.issues[b.nid]={nid:b.nid,summary:b.title,status:b.field_issue_status,project:c.title},a.saveIssues(),a.alerts.push({type:"success",message:"Retrieved data for #"+b.nid}),a.ajaxInProcess=!1})}).error(function(){a.alerts.push({type:"danger",message:"Sorry, there was an error processing the node ID"}),a.ajaxInProcess=!1})}}]),DrupalIssuesApp.filter("statusLabelFilter",function(){var a={1:"Active",2:"Fixed",3:"Closed (Duplicate)",4:"Postponed",5:"Closed (Won't Fix)",6:"Closed (Works as designed)",7:"Closed (Fixed)",8:"Needs Review",13:"Needs Work",14:"RTBC",15:"Patch (to be ported)",16:"Postponed (Needs more info)",18:"Closed (Cannot Reproduce)"};return function(b){return b?a[b]:""}}),DrupalIssuesApp.filter("statusColorFilter",function(){var a={1:"#f9f9f9",2:"#d7ffd8",3:"#fddddd",4:"#eff1f3",5:"#fddddd",6:"#fddddd",7:"#fddddd",8:"#ffffdd",13:"#ffece8",14:"#d7ffd8",15:"#d7ffd8",16:"#eff1f3",18:"#fddddd"};return function(b){return b?a[b]:""}}),DrupalIssuesApp.filter("orderObjectBy",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}),DrupalIssuesApp.factory("nodeService",["$http","$q","nodeEndpoint",function(a,b,c){return{getNode:function(b){return a({method:"get",url:c+b})}}}]);